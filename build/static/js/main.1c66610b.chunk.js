(this["webpackJsonpam-newsletter"]=this["webpackJsonpam-newsletter"]||[]).push([[0],{37:function(e,t,n){e.exports=n(61)},41:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(27),o=n.n(c),i=n(2),u=(n(41),n(11)),l=n(18),s=n(8),f=n(3),m=n(14),p=function(e){var t=e.radius,n=e.startPosition,c=e.sphereState,o=e.setSphereState,i=e.setGradientActive,p=e.breakPoint,b=e.endPosition,d=e.setEmailVisible,h=e.setInstructionsVisible,g=Object(r.useRef)(null),O=Object(r.useRef)(null),E=Object(r.useRef)(n),j=Object(m.b)({config:{mass:1.8,tension:84,friction:22,clamp:!0},pointsPosition:c.hold?b:n,circlePosition:c.hold?b:n,onFrame:function(e){E.current=e.pointsPosition,E.current[2]>0&&E.current[2]<50&&("backwards"===c.direction?(d((function(){return!0})),h((function(){return!0}))):(d((function(){return!1})),h((function(){return!1}))))},onRest:function(e){E.current.length===b.length&&E.current.every((function(e,t){return e===b[t]}))&&i((function(){return!0}))}});Object(u.e)((function(){if(g.current)return g.current.rotation.y=g.current.rotation.y+.003}));var v=Object(r.useCallback)((function(){E.current[2]>=p?o({hold:!0,direction:"forwards"}):o({hold:!1,direction:"backwards"})}),[o,p]),y=Object(r.useMemo)((function(){for(var e=[],n=0;n<1600;n++){var r=f.MathUtils.randFloatSpread(360),a=f.MathUtils.randFloatSpread(360),c=t*Math.sin(r)*Math.cos(a),o=t*Math.sin(r)*Math.sin(a),i=t*Math.cos(r);e.push([c,o,i])}return e.map((function(e){return Object(l.a)(f.Vector3,Object(s.a)(e))}))}),[t]);return a.a.createElement("group",null,a.a.createElement(m.a.mesh,{rotation:[-Math.PI/2,0,0],ref:O,onPointerDown:function(){return o({hold:!0,direction:"forwards"})},onPointerUp:function(){return v()},position:j.circlePosition},a.a.createElement("sphereBufferGeometry",{attach:"geometry",args:[130,32,32,0,2*Math.PI,0,.7*Math.PI]}),a.a.createElement("meshBasicMaterial",{attach:"material",transparent:!0,opacity:0,side:f.DoubleSide})),a.a.createElement(m.a.points,{ref:g,position:j.pointsPosition},a.a.createElement("geometry",{attach:"geometry",vertices:y}),a.a.createElement("pointsMaterial",{attach:"material",color:new f.Color(13383628),size:2})))},b=n(20),d=function(e,t){var n=Object(r.useRef)(!1);Object(r.useEffect)((function(){n.current?e():n.current=!0}),t)},h=n(5),g=n(36),O=function(e){var t=e.gradientActive,n=e.swipeThreshold,c=e.children,o=e.chapterConfigs,l=e.setGradientActive,s=e.setSphereState,f=e.chapterIndex,p=e.setChapterIndex,O=e.darkMode,E=Object(r.useRef)(void 0),j=Object(r.useRef)(null),v=Object(r.useRef)(a.a.Children.toArray(c).length),y=Object(r.useRef)(7),x=Object(r.useRef)([25,33.8,42.7,51.5]),F=Object(r.useState)({active:!1,initial_y_direction:null,x_start:null,y_start:null,y_travel:null,x_travel:null,swipePercentage:null}),w=Object(i.a)(F,2),S=w[0],C=w[1],M=Object(r.useState)(1),k=Object(i.a)(M,2),_=k[0],R=k[1],A=Object(r.useState)(0),B=Object(i.a)(A,2),D=B[0],I=B[1],P=Object(r.useState)(o[0].textColor),N=Object(i.a)(P,2),T=N[0],L=N[1],z=Object(r.useState)(o[0].lightColor),V=Object(i.a)(z,2),G=V[0],W=V[1],H=Object(r.useState)([0,0,0]),U=Object(i.a)(H,2),Y=U[0],J=U[1],q=Object(r.useState)([0,0,0]),X=Object(i.a)(q,2),$=X[0],K=(X[1],Object(r.useState)(o[0].planeColor)),Q=Object(i.a)(K,2),Z=Q[0],ee=Q[1],te=Object(r.useState)(o[0].lightIntensity),ne=Object(i.a)(te,2),re=ne[0],ae=ne[1],ce=Object(r.useState)(x.current[0]),oe=Object(i.a)(ce,2),ie=oe[0],ue=oe[1],le=Object(r.useMemo)((function(){return O?"#000000":"#FFFFFF"}),[O]),se=Object(m.b)({color:Z}),fe=Object(m.b)({position:Y,color:G,rotation:$,intensity:re,config:{mass:1,friction:8,tension:70,clamp:!0},onRest:function(e){null===f&&Y.every((function(e){return 0===e}))&&(l((function(){return!1})),s((function(){return{hold:!1,direction:"backwards"}})),setTimeout((function(){return p((function(){return 0}))}),500))}}),me=Object(h.b)({backgroundColor:O?"#FFFFFF":"#000000",top:ie,opacity:null===f?"0":"1",config:{clamp:!0}}),pe=Object(h.b)({zIndex:t?4:-1,opacity:t?1:0,immediate:function(e){return"zIndex"===e}}),be=Object(r.useCallback)((function(){p((function(){return null}))}),[p]),de=Object(r.useCallback)((function(){C((function(){return{active:!1,initial_y_direction:null,x_start:null,y_start:null,y_travel:null,x_travel:null,swipePercentage:null}}))}),[]),he=Object(r.useCallback)((function(){W((function(){return null===f?le:o[f].lightColor})),L((function(){return null===f?le:o[f].textColor})),ae((function(){return null===f?2:o[f].lightIntensity})),ee((function(){return null===f?le:o[f].planeColor})),J((function(){return[0,0,0]})),I((function(){return 0})),R((function(){return 1}))}),[f,o,le]),ge=Object(r.useCallback)((function(e){var t=e.clientY,n=e.clientX;C((function(e){var r={active:!0,x_start:n,y_start:t};return Object(b.a)(Object(b.a)({},e),r)}))}),[]),Oe=Object(r.useCallback)((function(e){de()}),[de]),Ee=Object(r.useCallback)((function(e){if(S.active){e.preventDefault();var t=e.clientY,r=e.clientX;C((function(e){var a,c=e.y_start?t-e.y_start:null,o=e.x_start?r-e.x_start:null;if(null===e.initial_y_direction){var i=null;c&&(c<0?i="up":c>0&&(i="down")),a={y_travel:c,x_travel:o,initial_y_direction:i}}else if(null!==e.initial_y_direction){var u=null!==c?c/n:null;"up"===e.initial_y_direction?u&&u<0&&(Math.abs(u)<.1&&(u=0),a={y_travel:c,x_travel:o,swipePercentage:u}):"down"===e.initial_y_direction&&null!==f&&f>0&&u&&u>0&&(Math.abs(u)<.1&&(u=0),a={y_travel:c,x_travel:o,swipePercentage:u})}return Object(b.a)(Object(b.a)({},e),a)}))}}),[S,n,f]);return Object(r.useEffect)((function(){var e=j.current;return e&&(e.addEventListener("pointerdown",ge),e.addEventListener("pointermove",Ee,!1),e.addEventListener("pointerup",Oe)),function(){e&&(e.removeEventListener("pointerdown",ge),e.removeEventListener("pointermove",Ee,!1),e.removeEventListener("pointerup",Oe))}}),[Ee,ge,Oe]),Object(r.useEffect)((function(){var e=S.active,t=S.swipePercentage,n=S.initial_y_direction;if(e)if(null!==t){var r=Math.abs(t);r>=1?(t<0?f===v.current-1?be():p((function(e){return null!==e?e+1:e})):p((function(e){return null!==e?e-1:e})),de()):r>=0&&r<1&&(I((function(){return 4+r*y.current})),R((function(){return 1-.5*r})),r>=.7?J((function(){return[48,120,72]})):r>=.5?J((function(){return[36,90,54]})):r>=.1&&J((function(){return[27,67.5,40.5]})))}else null===n?(I((function(){return 3.5})),J((function(){return[10,-52.5,31.5]}))):0===f&&"down"===n&&de();else he()}),[S,f,de,he,be,p]),d((function(){W((function(){return null===f?le:o[f].lightColor})),L((function(){return null===f?le:o[f].textColor})),ae((function(){return null===f?2:o[f].lightIntensity})),ee((function(){return null===f?le:o[f].planeColor})),J((function(){return[0,0,0]})),R((function(){return 1})),I((function(){return 0})),ue((function(e){return null===f?e:x.current[f]}))}),[f,o,le]),a.a.createElement(h.a.div,{className:"GradientShow",style:pe,ref:j},a.a.createElement(h.a.div,{className:"scroll-indicator",style:me}),a.a.createElement("div",{className:"grid"},a.a.createElement(g.Transition,{items:f,from:{opacity:0,textShadow:"0px 0px 0px ".concat(T),immediate:function(e){return"textShadow"===e}},update:{opacity:_,textShadow:"0px 0px ".concat(D,"px ").concat(T),config:{mass:1,tension:190,friction:20,clamp:!0}},enter:{opacity:1},leave:{textShadow:"0px 0px ".concat(y,"px black"),opacity:0,config:{mass:1,friction:10,clamp:!0}}},(function(e){return function(t){return null!==e?a.a.cloneElement(a.a.Children.toArray(c)[e],{style:t}):null}})),a.a.createElement(u.a,{className:"gradient"},a.a.createElement(m.a.rectAreaLight,{position:fe.position,color:fe.color,rotation:fe.rotation,intensity:fe.intensity,width:150,height:550,lookAt:function(){return E.current&&E.current.position}}),a.a.createElement("mesh",{position:[0,0,-80],ref:E},a.a.createElement("planeBufferGeometry",{attach:"geometry",args:[1e3,1e3]}),a.a.createElement(m.a.meshPhysicalMaterial,{attach:"material",color:se.color})))))},E=function(e){var t=e.darkMode,n=Object(r.useState)(null),c=Object(i.a)(n,2),o=c[0],u=c[1],l=Object(r.useState)(""),s=Object(i.a)(l,2),f=s[0],m=s[1],p=Object(h.b)({color:t?"#FFFFFF":"#000000",borderBottom:t?"1.5px solid #FFFFFF":"1.5px solid #000000",config:{duration:130}}),b=Object(h.b)({boxShadow:t?"inset 0px 0px 1px 0px #FFFFFF":"inset 0px 0px 2px 1px #FFFFFF",immediate:function(e){return"boxShadow"===e}});return a.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={email:f},n={method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(t)};fetch("http://localhost:3000/subscribe",n).then((function(e){return e.json()})).then((function(e){console.log(e),202===e.statusCode?u(!0):u(!1)})).catch((function(e){return console.log(e)}))},className:o?"Email success":"false"===o?"Email fail":"Email"},a.a.createElement(h.a.input,{className:t?"darkmode":"",style:p,type:"email",value:f,placeholder:"email",onChange:function(e){return m(e.currentTarget.value)},required:!0}),a.a.createElement(h.a.input,{style:b,type:"submit",value:"SUBSCRIBE"}))},j=function(e){e.sphereState;var t=e.emailVisible,n=e.darkMode,r=e.setDarkMode,c=Object(h.b)({config:{mass:1,friction:20,clamp:!0},opacity:t?1:0,bottom:t?0:-6,backgroundColor:n?"#000B23":"#F4F4F4",immediate:function(e){return["backgroundColor"].includes(e)}}),o=Object(h.b)({color:n?"#FFFFFF":"#000000",config:{duration:130}}),i=Object(h.b)({border:n?"2px solid #FFFFFF":"2px solid #000000",color:n?"#FFFFFF":"#000000",config:{duration:130}});return a.a.createElement(h.a.div,{className:"MobileEmailForm",style:c},a.a.createElement(h.a.p,{style:o},"STAY UPDATED"),a.a.createElement(E,{darkMode:n}),a.a.createElement(h.a.button,{style:i,className:"mode-switch",onClick:function(){return r((function(){return!n}))}},n?"L":"D"))},v=function(){var e=Object(r.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(!1),l=Object(i.a)(o,2),s=l[0],f=l[1],m=Object(r.useState)(0),b=Object(i.a)(m,2),d=b[0],g=b[1],E=Object(r.useState)({hold:!1,direction:null}),v=Object(i.a)(E,2),y=v[0],x=v[1],F=Object(r.useState)(!0),w=Object(i.a)(F,2),S=w[0],C=w[1],M=Object(r.useState)(!0),k=Object(i.a)(M,2),_=k[0],R=k[1],A=Object(r.useMemo)((function(){return n?[{lightIntensity:0,textColor:"#972C95",planeColor:"#000000",lightColor:"#000000"},{lightIntensity:1.45,textColor:"#000000",planeColor:"#FFFFFF",lightColor:"#EAEAEA"},{lightIntensity:1.3,textColor:"#C9C9C9",planeColor:"#FFFFFF",lightColor:"#e75a81"},{lightIntensity:2,textColor:"#e75a81",planeColor:"#FFFFFF",lightColor:"#FFFFFF"}]:[{lightIntensity:2,textColor:"#972C95",planeColor:"#FFFFFF",lightColor:"#FFFFFF"},{lightIntensity:1.3,textColor:"#FFFFFF",planeColor:"#FFFFFF",lightColor:"#e75a81"},{lightIntensity:1.45,textColor:"#e75a81",planeColor:"#FFFFFF",lightColor:"#EAEAEA"},{lightIntensity:1,textColor:"#C9C9C9",planeColor:"#FFFFFF",lightColor:"#000000"}]}),[n]),B=Object(h.b)({opacity:_?1:0,config:{mass:1,friction:10,clamp:!0}}),D=Object(h.b)({color:n?"#FFFFFF":"#000000",config:{duration:130}});return a.a.createElement("div",{className:"MobileAnimation"},a.a.createElement("div",{className:"logo",onClick:function(){s&&g((function(){return null}))}},n?a.a.createElement("img",{src:"../assets/logo_white.svg",alt:"Logo"}):a.a.createElement("img",{src:"../assets/logo.svg",alt:"Logo"})),a.a.createElement(u.a,{style:{backgroundColor:n?"#000000":"transparent"},className:"Canvas",camera:{position:[0,0,500]}},a.a.createElement(p,{radius:135,setInstructionsVisible:R,setEmailVisible:C,startPosition:[0,135,0],sphereState:y,endPosition:[0,-120,646],setSphereState:x,setGradientActive:f,breakPoint:468})),a.a.createElement(O,{darkMode:n,chapterIndex:d,setChapterIndex:g,gradientActive:s,swipeThreshold:250,chapterConfigs:A,setGradientActive:f,setSphereState:x},a.a.createElement("div",{className:"text"},a.a.createElement("h2",null,"The most damaging phrase in language is 'It's always been done that way.'"),a.a.createElement("h4",{className:"spacer-top-1"},"- Admiral Grace Hopper")),a.a.createElement("div",{className:"text"},a.a.createElement("h2",null,"Andy Mag is an experiential magazine that enables readers to interact (engage) with diverse themes and ideas.")),a.a.createElement("div",{className:"text"},a.a.createElement("h2",null,"Because a great story is worth remembering.")),a.a.createElement("div",{className:"text"},a.a.createElement("h2",null,"Subscribe to Andy Mag for updates."))),a.a.createElement(h.a.div,{className:"hold-icon",style:B},n?a.a.createElement("img",{src:"../assets/holdicon_white.svg",alt:"Press and hold to learn more about Andy Mag"}):a.a.createElement("img",{src:"../assets/holdicon.svg",alt:"Press and hold to learn more about Andy Mag"}),a.a.createElement(h.a.p,{style:D},"Press and hold to learn more about Andy Mag")),a.a.createElement(j,{sphereState:y,emailVisible:S,darkMode:n,setDarkMode:c}))},y=function(){return a.a.createElement(v,null)},x=function(e){var t=e.chapterIndex,n=e.setChapterIndex,c=e.wheelThreshold,o=e.setBackgroundColor,u=e.setButtonShadow,l=e.setOrbMovingState,s=e.subscribeActive,f=Object(r.useRef)([Object(r.createRef)(),Object(r.createRef)(),Object(r.createRef)(),Object(r.createRef)()]),m=Object(r.useState)(null),p=Object(i.a)(m,2),b=p[0],g=p[1],O=Object(h.b)({opacity:s?0:1,zIndex:s?-1:2,config:{mass:1,friction:4,clamp:!0}}),E=Object(r.useCallback)((function(){null!==f.current&&f.current.forEach((function(e,t){null!==e.current&&(e.current.classList.remove("out-up"),e.current.classList.add("out-down"))}))}),[]);Object(r.useEffect)((function(){var e=f.current[0].current,t=void 0===e?null:e;null===t||void 0===t||t.classList.remove("out-down")}),[]),Object(r.useEffect)((function(){s?(o((function(){return"#231B1B"})),setTimeout(E,1e3)):null!==f.current&&null!==f.current[0].current&&f.current[0].current.classList.contains("out-down")&&f.current[0].current.classList.remove("out-down")}),[s,o,E]),d((function(){if(null!==t){var e=f.current[t].current,n=void 0===e?null:e;g((function(){return"in"})),null===n||void 0===n||n.classList.remove("out-down","out-up")}}),[t]);var j=Object(r.useCallback)((function(e){var n=e.deltaY;if(null===b&&Math.abs(n)>c&&null!==t){var r=f.current[t].current,a=void 0===r?null:r;n>0&&t<3?(null===a||void 0===a||a.classList.add("out-up"),g((function(){return"out-up"})),l((function(){return"out"}))):n<0&&t>0&&(null===a||void 0===a||a.classList.add("out-down"),g((function(){return"out-down"})),l((function(){return"out"})))}}),[t,c,b,l]);return a.a.createElement(h.a.div,{className:"Text grid",style:O},a.a.createElement("div",{className:"chapter out-down",onWheel:function(e){return j(e)},ref:f.current[0]},a.a.createElement("span",null,a.a.createElement("span",null,a.a.createElement("h2",null,"The most damaging phrase in language is 'It's"))),a.a.createElement("span",null,a.a.createElement("span",{style:{transitionDelay:"0.06s"}},a.a.createElement("h2",null,"always been done that way'"))),a.a.createElement("span",{className:"spacer-top-1"},a.a.createElement("span",{style:{transitionDelay:"0.09s"},onTransitionEnd:function(){"out-up"===b?(n((function(){return 1})),o((function(){return"#D695C7"}))):"in"===b&&g((function(){return null}))}},a.a.createElement("h2",null,"- Admiral Grace Hopper")))),a.a.createElement("div",{className:"chapter out-down",ref:f.current[1],onWheel:function(e){return j(e)}},a.a.createElement("span",null,a.a.createElement("span",null,a.a.createElement("h2",null,"Andy Mag is an experiential magazine that"))),a.a.createElement("span",null,a.a.createElement("span",{style:{transitionDelay:"0.06s"}},a.a.createElement("h2",null,"enables readers to interact (engage) with diverse"))),a.a.createElement("span",null,a.a.createElement("span",{style:{transitionDelay:"0.09s"},onTransitionEnd:function(){"out-up"===b?(n((function(){return 2})),o((function(){return"#9C95D6"})),u((function(){return"1px 2px 7px #877DD8, -1px -2px 7px #BAB7D3"}))):"out-down"===b?(n((function(){return 0})),o((function(){return"#D695AB"})),u((function(){return"1px 2px 7px 0px #576F6F6F, -1px -2px 7px #A6D3D3D3"}))):"in"===b&&g((function(){return null}))}},a.a.createElement("h2",null,"themes and ideas.")))),a.a.createElement("div",{className:"chapter out-down",ref:f.current[2],onWheel:function(e){return j(e)}},a.a.createElement("span",null,a.a.createElement("span",{onTransitionEnd:function(){"out-up"===b?(n((function(){return 3})),o((function(){return"#95B1D6"})),u((function(){return"1px 2px 7px 0px #779FD4, -1px -2px 7px #BAC4D2"}))):"out-down"===b?(n((function(){return 1})),o((function(){return"#D695C7"})),u((function(){return"1px 2px 7px 0px #576F6F6F, -1px -2px 7px #A6D3D3D3"}))):"in"===b&&g((function(){return null}))}},a.a.createElement("h2",null,"Because a great story is worth remembering.")))),a.a.createElement("div",{className:"chapter out-down",ref:f.current[3],onWheel:function(e){return j(e)}},a.a.createElement("span",null,a.a.createElement("span",{onTransitionEnd:function(){"out-down"===b?(n((function(){return 2})),o((function(){return"#9C95D6"})),u((function(){return"1px 2px 7px #877DD8, -1px -2px 7px #BAB7D3"}))):"in"===b&&g((function(){return null}))}},a.a.createElement("h2",null,"Subscribe to Andy Mag for updates.")))))},F=function(e){var t=e.pointerPosition,n=e.chapterIndex,c=e.orbMovingState,o=e.resetPointer,p=e.setOrbMovingState,b=e.subscribeActive,d=e.setSubscribeActive,h=e.setEmailActive,g=e.setOrbHold,O=e.orbHold,E=e.setScrollIndicatorHeight,j=e.setChapterIndex,v=e.setBackgroundColor,y=e.setButtonShadow,x=Object(u.f)().viewport,F=Object(r.useRef)(null),w=Object(r.useRef)(null),S=Object(r.useRef)(null),C=Object(r.useRef)([x.width<1280?-220:-260,0,0]),M=Object(r.useRef)(null),k=Object(r.useRef)(new f.Sphere),_=Object(r.useRef)([{textRef1:{position:[0,59,0],geometry:[690,26,0]},textRef2:{position:[0,6,0],geometry:[415,26,0]},textRef3:{position:[0,-60,0],geometry:[355,26,0]}},{textRef1:{position:[0,51,0],geometry:[647,26,0]},textRef2:{position:[0,-1,0],geometry:[748,26,0]},textRef3:{position:[0,-51,0],geometry:[272,26,0]}},{textRef1:{position:null,geometry:void 0},textRef2:{position:[0,0,0],geometry:[682,26,0]},textRef3:{position:null,geometry:void 0}},{textRef1:{position:null,geometry:void 0},textRef2:{position:[0,0,0],geometry:[537,26,0]},textRef3:{position:null,geometry:void 0}}]),R=Object(r.useMemo)((function(){var e=200;return x.width>=1280&&(e=240),[{pre:[-x.width/2+100,-x.height/2-e,0],start:[0,0,0]},{pre:[-x.width/2+180,x.height/2+e,0],start:[-250,0,0]},{pre:[x.width/2+180,-x.height/2-180,0],start:[50,0,0]},{pre:[x.width/2-200,x.height/2+e,0],start:[100,0,0]}]}),[]),A=Object(r.useRef)({resting:{mass:1e3,friction:1400,clamp:!1},intersecting:void 0,out:{mass:5,friction:4.5,clamp:!0},to:{duration:1},in:{mass:1e3,friction:1400,clamp:!1},subscribe:{tension:120,clamp:!0},subscribe_hold:{mass:70,tension:100,clamp:!0},at_threshold:{duration:600}}),B=Object(r.useRef)(null),D=Object(r.useRef)(new f.Box3(new f.Vector3,new f.Vector3)),I=Object(r.useRef)(null),P=Object(r.useRef)(new f.Box3(new f.Vector3,new f.Vector3)),N=Object(r.useRef)(null),T=Object(r.useRef)(new f.Box3(new f.Vector3,new f.Vector3)),L=Object(r.useRef)(null),z=Object(r.useRef)(new f.Box3(new f.Vector3,new f.Vector3)),V=Object(r.useState)(null),G=Object(i.a)(V,2),W=G[0],H=G[1],U=Object(r.useState)(R[n].pre),Y=Object(i.a)(U,2),J=Y[0],q=Y[1],X=Object(r.useState)("intersecting"===c),$=Object(i.a)(X,2),K=$[0],Q=$[1],Z=Object(r.useState)(1),ee=Object(i.a)(Z,2),te=ee[0],ne=ee[1],re=Object(r.useMemo)((function(){for(var e=[],t=0;t<1800;t++){var n=f.MathUtils.randFloatSpread(360),r=f.MathUtils.randFloatSpread(360),a=200*Math.sin(n)*Math.cos(r),c=200*Math.sin(n)*Math.sin(r),o=200*Math.cos(n);e.push([a,c,o])}return e.map((function(e){return Object(l.a)(f.Vector3,Object(s.a)(e))}))}),[]),ae=Object(r.useCallback)((function(){if(null!==F.current){var e=[F.current.position.x,F.current.position.y,F.current.position.z],t=J;if("subscribe"===c?!!t&&e.every((function(e,n){return Math.abs(e-t[n])<8})):!!t&&e.every((function(e,n){return e===t[n]})))switch(c){case"to":return"pre";case"subscribe":return"subscribe";case"at_threshold":return"at_threshold";default:return!1}return!1}return!1}),[c,J]),ce=Object(m.b)({position:J,opacity:te,transparent:0,config:K?A.current.intersecting:A.current[c],onFrame:function(e){var t=e.opacity,r=ae();"pre"===r?(d((function(e){return!1})),E((function(){return 0})),p((function(){return"in"})),q((function(){return R[n].start}))):"subscribe"===r?h((function(){return!0})):"at_threshold"===r&&0===t&&(j((function(){return 0})),p((function(){return"to"})),h((function(){return!1})),g((function(){return!1})),q((function(){return R[0].pre})),v((function(){return"#D695AB"})),y((function(){return"1px 2px 7px 0px #576F6F6F, -1px -2px 7px #A6D3D3D3"})))}}),oe=ce.position,ie=ce.opacity,ue=ce.transparent,le=Object(r.useCallback)((function(e){null!==F.current&&(F.current.rotation.y+=e)}),[]),se=Object(r.useCallback)((function(){null!==M.current&&M.current.geometry.computeBoundingSphere(),null!==B.current&&B.current.geometry.computeBoundingBox(),null!==I.current&&I.current.geometry.computeBoundingBox(),null!==N.current&&N.current.geometry.computeBoundingBox(),null!==L.current&&L.current.geometry.computeBoundingBox()}),[]),fe=Object(r.useCallback)((function(){null!==k.current&&(x.width>900&&x.width<1280?k.current.radius=M.current.geometry.boundingSphere.radius:x.width>=1280&&(k.current.radius=M.current.geometry.boundingSphere.radius+40))}),[x]),me=Object(r.useCallback)((function(){null!==k.current&&(k.current.center=new f.Vector3(M.current.position.x,M.current.position.y,M.current.position.z))}),[]),pe=Object(r.useCallback)((function(){if(null!==F.current){var e={left:F.current.position.x+.5*x.width,right:.5*x.width-F.current.position.x,top:.5*x.height-F.current.position.y,bottom:F.current.position.y+.5*x.height},t=Math.min(e.left,e.right,e.top,e.bottom);if(t===e.left)return"left";if(t===e.right)return"right";if(t===e.bottom)return"bottom";if(t===e.top)return"top"}return null}),[x]),be=Object(r.useCallback)((function(){var e=null;null!==t[0]&&null!==t[1]&&(e=[t[0]-window.innerWidth/2,-t[1]+window.innerHeight/2,0]);return e}),[t]),de=Object(r.useCallback)((function(e,t){var n=Math.max(t.min.x,Math.min(e.center.x,t.max.x)),r=Math.max(t.min.y,Math.min(e.center.y,t.max.y)),a=Math.max(t.min.z,Math.min(e.center.z,t.max.z));return Math.sqrt((n-e.center.x)*(n-e.center.x)+(r-e.center.y)*(r-e.center.y)+(a-e.center.z)*(a-e.center.z))<e.radius}),[]),he=Object(r.useCallback)((function(){var e;e=x.width>900&&x.width<1280?200:240,q((function(t){if(null!==t&&null!==F.current){var n=F.current.position.x,r=F.current.position.y,a=F.current.position.z;return"left"===S.current?n=-.5*x.width-e:"bottom"===S.current?r=-.5*x.height-e:"top"===S.current?r=.5*x.height+e:"right"===S.current&&(n=.5*x.width+e),[n,r,a]}return null}))}),[x]),ge=Object(r.useCallback)((function(){return!b&&(de(k.current,D.current)||de(k.current,z.current)||de(k.current,P.current)||de(k.current,T.current))}),[de,b]);return Object(r.useEffect)((function(){se(),z.current.setFromObject(L.current),fe(),me()}),[se,fe,me]),Object(r.useEffect)((function(){p((function(){return"to"})),q((function(){return R[n].pre})),D.current.setFromObject(B.current),P.current.setFromObject(I.current),T.current.setFromObject(N.current)}),[n,p,R]),Object(r.useEffect)((function(){x.width>900&&x.width<1280?(H((function(){return[1,1,1]})),fe()):(H((function(){return[1.2,1.2,1.2]})),fe())}),[x,fe]),Object(r.useEffect)((function(){"out"===c?(he(),o()):"at_threshold"===c?ne((function(){return 0})):"to"===c&&ne((function(e){return 0===e?1:e}))}),[c,he,o]),Object(r.useEffect)((function(){b?p((function(){return"subscribe"})):ne((function(e){return 0===e?1:e}))}),[b,p]),Object(r.useEffect)((function(){p((function(e){return"subscribe"===e&&!0===O?"subscribe_hold":"subscribe_hold"===e&&!1===O?"subscribe":e}))}),[O,p]),Object(u.e)((function(){null!==F.current&&(le(.001),me(),S.current=pe(),ge()?(Q((function(){return!0})),q((function(){return w.current}))):(Q((function(){return!1})),w.current=[F.current.position.x,F.current.position.y,F.current.position.z],"subscribe"===c?(q((function(){return C.current=[x.width<1280?-220:-260,0,0],[x.width<1280?-220:-260,0,0]})),E((function(e){if(null!==F.current&&C.current[1]-F.current.position.y<1){var t=C.current[0],n=F.current.position.x,r=0;return null!==n&&(r=Math.abs(t-n)/Math.abs(t)),47.2*r}return e}))):"resting"===c?q((function(e){return"resting"===c&&null!==t[0]&&null!==t[1]?be():e})):"in"===c?q((function(e){return null!==t[0]&&null!==t[1]?(p((function(){return"resting"})),be()):e})):"subscribe_hold"===c&&(q((function(){return[0,0,0]})),E((function(e){if(null!==F.current&&C.current[1]-F.current.position.y<1){var t=C.current[0],n=F.current.position.x,r=0;return null!==n&&(r=Math.abs(t-n)/Math.abs(t)),1===r&&p((function(){return"at_threshold"})),47.2*r}return e})))))})),a.a.createElement(a.a.Fragment,null,a.a.createElement("group",null,a.a.createElement(m.a.mesh,{onPointerDown:function(){return g((function(e){return"subscribe"===c||"subscribe_hold"===c||e}))},onPointerUp:function(){return g((function(e){return"subscribe"!==c&&"subscribe_hold"!==c&&e}))},ref:M,scale:W,position:oe},a.a.createElement("sphereBufferGeometry",{attach:"geometry",args:[200,32,32,0,2*Math.PI,0,Math.PI]}),a.a.createElement("meshBasicMaterial",{attach:"material",transparent:!0,opacity:0,side:f.DoubleSide})),a.a.createElement(m.a.points,{onPointerDown:function(){return g((function(){return!0}))},onPointerUp:function(){return g((function(){return!1}))},ref:F,scale:W,position:oe},a.a.createElement("geometry",{attach:"geometry",vertices:re}),a.a.createElement(m.a.pointsMaterial,{attach:"material",color:new f.Color(13383628),size:2.5,transparent:ue,opacity:ie}))),a.a.createElement("group",null,a.a.createElement("mesh",{ref:B,position:_.current[n].textRef1.position},a.a.createElement("boxGeometry",{attach:"geometry",args:_.current[n].textRef1.geometry}),a.a.createElement("meshBasicMaterial",{attach:"material",transparent:!0,opacity:0})),a.a.createElement("mesh",{ref:I,position:_.current[n].textRef2.position},a.a.createElement("boxGeometry",{attach:"geometry",args:_.current[n].textRef2.geometry}),a.a.createElement("meshBasicMaterial",{attach:"material",transparent:!0,opacity:0})),a.a.createElement("mesh",{ref:N,position:_.current[n].textRef3.position},a.a.createElement("boxGeometry",{attach:"geometry",args:_.current[n].textRef3.geometry}),a.a.createElement("meshBasicMaterial",{attach:"material",transparent:!0,opacity:0})),a.a.createElement("mesh",{ref:L,position:[0,-x.height/2.65,0]},a.a.createElement("boxGeometry",{attach:"geometry",args:[280,50,0]}),a.a.createElement("meshBasicMaterial",{attach:"material",transparent:!0,opacity:0}))))},w=function(e){var t=e.emailActive,n=e.orbHold,c=Object(r.useState)(null),o=Object(i.a)(c,2),u=o[0],l=o[1],s=Object(r.useState)(""),f=Object(i.a)(s,2),m=f[0],p=f[1],b=Object(r.useState)(!1),d=Object(i.a)(b,2),g=d[0],O=d[1],E=Object(r.useRef)(null),j=Object(h.b)({opacity:n?0:1,visibility:n?"hidden":"visible",config:{mass:2,friction:2,clamp:!0}});Object(r.useEffect)((function(){null!==E.current&&(t?E.current.classList.add("active"):E.current.classList.remove("active"),g?E.current.classList.add("focused"):E.current.classList.remove("focused"))}),[t,g,m]);return a.a.createElement(h.a.div,{className:"DesktopEmail grid",ref:E,style:j},a.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={email:m},n={method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(t)};fetch("http://localhost:3000/subscribe",n).then((function(e){return e.json()})).then((function(e){console.log(e),202===e.statusCode?l(!0):l(!1)})).catch((function(e){return console.log(e)}))},className:u?"desktopEmailWrapper Email success":"false"===u?"desktopEmailWrapper Email fail":"desktopEmailWrapper Email"},a.a.createElement("span",null,a.a.createElement("span",null,a.a.createElement("h3",null,"STAY UPDATED WITH THE"))),a.a.createElement("span",null,a.a.createElement("span",{style:{transitionDelay:"0.05s"}},a.a.createElement("h3",null,"ANDY MAG NEWSLETTER"))),a.a.createElement("label",null,a.a.createElement("h4",null,"Email")),g?a.a.createElement("img",{className:"submitIcon",src:"../assets/paper_plane_purple.svg",alt:"Submit"}):a.a.createElement("img",{className:"submitIcon",src:"../assets/paper_plane_white.svg",alt:"Submit"}),a.a.createElement("input",{onFocus:function(){return O((function(){return!0}))},onBlur:function(){(void 0===m||m.length<1)&&O((function(){return!1}))},type:"email",value:m,onChange:function(e){return p(e.currentTarget.value)},required:!0})))},S=function(){var e=Object(r.useState)(0),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)("#D695AB"),l=Object(i.a)(o,2),s=l[0],f=l[1],m=Object(r.useState)(!1),p=Object(i.a)(m,2),b=p[0],d=p[1],g=Object(r.useState)(!1),O=Object(i.a)(g,2),E=O[0],j=O[1],v=Object(r.useState)("1px 2px 7px 0px #576F6F6F, -1px -2px 7px #A6D3D3D3"),y=Object(i.a)(v,2),S=y[0],C=y[1],M=Object(r.useRef)([0,10,19,28.2]),k=Object(r.useState)(M.current[0]),_=Object(i.a)(k,2),R=_[0],A=_[1],B=Object(r.useState)(0),D=Object(i.a)(B,2),I=D[0],P=D[1],N=Object(r.useState)(null),T=Object(i.a)(N,2),L=T[0],z=(T[1],Object(r.useState)("resting")),V=Object(i.a)(z,2),G=V[0],W=V[1],H=Object(r.useState)(!1),U=Object(i.a)(H,2),Y=U[0],J=U[1],q=Object(r.useState)([null,null]),X=Object(i.a)(q,2),$=X[0],K=X[1],Q=Object(r.useRef)(40),Z=Object(r.useRef)(null),ee=Object(h.b)({top:b?"auto":R,bottom:b?1:"auto",height:b?I:19,config:{clamp:!0},backgroundColor:b?"white":"black"});Object(r.useEffect)((function(){A((function(){return M.current[n]}))}),[n]);var te=Object(r.useCallback)((function(){K((function(){return[null,null]}))}),[]),ne=Object(h.b)({opacity:b?0:1,config:{mass:1,friction:4,clamp:!0}});return a.a.createElement("div",{ref:Z,className:"DesktopAnimation",style:{backgroundColor:s},onPointerMove:function(e){var t=e.clientX,n=e.clientY;K((function(){return[t,n]}))}},a.a.createElement(u.a,{className:"Orb",style:{position:"absolute"},orthographic:!0,camera:{left:L?-L.width/2:void 0,right:L?L.width/2:void 0,top:L?L.height/2:void 0,bottom:L?-L.height/2:void 0,near:300,far:-300}},a.a.createElement(F,{setBackgroundColor:f,setButtonShadow:C,setChapterIndex:c,setScrollIndicatorHeight:P,orbHold:Y,setOrbHold:J,setEmailActive:j,pointerPosition:$,chapterIndex:n,orbMovingState:G,resetPointer:te,setOrbMovingState:W,subscribeActive:b,setSubscribeActive:d})),a.a.createElement("div",{className:"logo",onClick:function(){return c((function(){return 0}))}},b?a.a.createElement("img",{src:"../assets/logo_white.svg",alt:"Logo"}):a.a.createElement("img",{src:"../assets/logo.svg",alt:"Logo"}),a.a.createElement(h.a.div,{className:"scroll-indicator",style:ee})),a.a.createElement(x,{chapterIndex:n,setChapterIndex:c,wheelThreshold:Q.current,setBackgroundColor:f,setButtonShadow:C,setOrbMovingState:W,subscribeActive:b}),a.a.createElement(h.a.div,{className:"SubscribeButton",style:ne},a.a.createElement("button",{onClick:function(){return d((function(){return!0}))},style:{boxShadow:S}},"SUBSCRIBE")),a.a.createElement("div",{className:"SocialMedia"},a.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.snapchat.com/add/theandymag"},a.a.createElement("img",{src:"../assets/snapchat.svg",alt:"Snapchat"})),a.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.instagram.com/theandymag/"},a.a.createElement("img",{src:"../assets/instagram.svg",alt:"Instagram"})),a.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://twitter.com/theandymag_"},a.a.createElement("img",{src:"../assets/twitter.svg",alt:"Twitter"}))),a.a.createElement(w,{orbHold:Y,emailActive:E}))};var C=function(){var e=Object(r.useState)(window.innerWidth<=900),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(r.useCallback)((function(){window.innerWidth<=900?c(!0):c(!1)}),[]);return Object(r.useEffect)((function(){window.addEventListener("resize",o)}),[o]),a.a.createElement("div",{className:"App"},n?a.a.createElement(y,null):a.a.createElement(S,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[37,1,2]]]);
//# sourceMappingURL=main.1c66610b.chunk.js.map